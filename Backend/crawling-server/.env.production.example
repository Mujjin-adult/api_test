# =================================================================
# Production Environment Configuration
# =================================================================
# 프로덕션 환경용 설정입니다.
# 복사 후 사용: cp .env.production.example .env
# ⚠️  주의: 모든 CHANGE_THIS 값을 실제 값으로 변경하세요!
# =================================================================

# =================================================================
# Database Settings (Production)
# =================================================================
DATABASE_URL=postgresql://CHANGE_DB_USER:CHANGE_DB_PASSWORD@prod-db-host:5432/school_notices_prod
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=40
DB_POOL_PRE_PING=true
DB_POOL_RECYCLE=1800

# =================================================================
# Redis Settings (Production)
# =================================================================
CELERY_BROKER_URL=redis://:CHANGE_REDIS_PASSWORD@prod-redis-host:6379/0
CELERY_RESULT_BACKEND=redis://:CHANGE_REDIS_PASSWORD@prod-redis-host:6379/0
REDIS_HOST=prod-redis-host
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=CHANGE_REDIS_PASSWORD

# =================================================================
# API Security (Production - 강력한 키 필수!)
# =================================================================
# 생성 방법:
# python -c "import secrets; print('API_KEY=' + secrets.token_urlsafe(32))"
# python -c "import secrets; print('SECRET_KEY=' + secrets.token_urlsafe(64))"
API_KEY=CHANGE_THIS_TO_RANDOM_API_KEY_32_CHARS_MIN
SECRET_KEY=CHANGE_THIS_TO_RANDOM_SECRET_KEY_64_CHARS_MIN

# CORS 허용 도메인 (실제 프론트엔드 도메인으로 변경)
ALLOWED_ORIGINS=https://your-domain.com,https://www.your-domain.com

# Trusted Hosts
TRUSTED_HOSTS=your-domain.com,www.your-domain.com,api.your-domain.com

# =================================================================
# Application Settings (Production)
# =================================================================
APP_NAME=College Notice Crawler
DEBUG=false
ENV=production
LOG_LEVEL=INFO

# =================================================================
# Crawler Settings (Production - 안전한 설정)
# =================================================================
DEFAULT_RATE_LIMIT_PER_HOST=0.5
MAX_CONCURRENT_REQUESTS_PER_HOST=1
BROWSER_TIMEOUT_SECONDS=45
MAX_RETRIES=3
RETRY_DELAY_SECONDS=10
RESPECT_ROBOTS_TXT=true
REQUEST_TIMEOUT=30
MAX_CONTENT_LENGTH=10485760

USER_AGENT=Mozilla/5.0 (compatible; CollegeNotiBot/2.0; +https://your-domain.com/bot)

# =================================================================
# Playwright Settings (Production)
# =================================================================
PLAYWRIGHT_BROWSER_TYPE=chromium
PLAYWRIGHT_HEADLESS=true
PLAYWRIGHT_VIEWPORT_WIDTH=1920
PLAYWRIGHT_VIEWPORT_HEIGHT=1080
PLAYWRIGHT_TIMEOUT=30000
PLAYWRIGHT_WAIT_UNTIL=networkidle

# =================================================================
# Monitoring & Logging (Production)
# =================================================================
# Sentry DSN (필수!)
SENTRY_DSN=https://CHANGE_THIS@o123456.ingest.sentry.io/789012
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1

ENABLE_PROMETHEUS=true
METRICS_PORT=8000

# Grafana Admin Credentials (강력한 비밀번호 필수!)
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=CHANGE_THIS_STRONG_PASSWORD_MIN_16_CHARS

HEALTH_CHECK_INTERVAL=30

# Logging (프로덕션에서는 JSON 포맷 권장)
LOG_FORMAT=json
LOG_FILE_PATH=/var/log/college-notice-crawler/app.log
LOG_ROTATION=daily
LOG_RETENTION_DAYS=90

# =================================================================
# Notifications (Production)
# =================================================================
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
ENABLE_SLACK_NOTIFICATIONS=true
NOTIFICATION_LEVEL=ERROR
WEBHOOK_TIMEOUT=10

# =================================================================
# Security Settings (Production - 엄격한 설정)
# =================================================================
ENABLE_RATE_LIMITING=true
MAX_REQUESTS_PER_MINUTE=30
BLOCK_SUSPICIOUS_IPS=true
ENABLE_PROXY_ROTATION=false

# =================================================================
# Backup & Recovery (Production)
# =================================================================
ENABLE_AUTO_BACKUP=true
BACKUP_INTERVAL_HOURS=24
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=/backups

# =================================================================
# Performance Tuning (Production)
# =================================================================
WORKER_CONNECTIONS=1000
WORKER_PROCESSES=4
WORKER_TIMEOUT=30
KEEPALIVE_TIMEOUT=5

# Celery Workers
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_PREFETCH_MULTIPLIER=1
CELERY_TASK_TIME_LIMIT=3600
CELERY_TASK_SOFT_TIME_LIMIT=3000

# =================================================================
# SSL/TLS Settings (Production)
# =================================================================
FORCE_HTTPS=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true

# =================================================================
# IMPORTANT: Production Checklist
# =================================================================
# [ ] 모든 CHANGE_THIS 값을 실제 값으로 변경했는지 확인
# [ ] API_KEY와 SECRET_KEY를 강력한 랜덤 값으로 생성했는지 확인
# [ ] 데이터베이스 비밀번호가 충분히 강력한지 확인
# [ ] Sentry DSN이 올바르게 설정되었는지 확인
# [ ] CORS allowed_origins가 올바른지 확인
# [ ] Slack Webhook URL이 설정되었는지 확인
# [ ] SSL/TLS 인증서가 올바르게 설정되었는지 확인
# [ ] 백업 설정이 올바른지 확인
# [ ] 로그 디렉토리에 쓰기 권한이 있는지 확인
# =================================================================
