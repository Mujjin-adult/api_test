# =================================================================
# 환경 설정 템플릿
# =================================================================
# 이 파일을 복사하여 .env 파일을 생성하세요:
# cp .env.example .env
#
# ⚠️  주의: .env 파일은 절대 Git에 커밋하지 마세요!
# =================================================================

# =================================================================
# Database Settings
# =================================================================
# PostgreSQL 연결 정보
# 형식: postgresql://[사용자]:[비밀번호]@[호스트]:[포트]/[데이터베이스명]
DATABASE_URL=postgresql://crawler:CHANGE_THIS_PASSWORD@postgres:5432/school_notices

# Database Connection Pool
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_PRE_PING=true
DB_POOL_RECYCLE=3600

# =================================================================
# Redis Settings (Celery Broker)
# =================================================================
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
# REDIS_PASSWORD=  # Redis 비밀번호 (선택사항)

# =================================================================
# API Security
# =================================================================
# API 키: 최소 32자 이상의 랜덤 문자열 사용
# 생성 방법: python -c "import secrets; print(secrets.token_urlsafe(32))"
API_KEY=CHANGE_THIS_TO_RANDOM_API_KEY_32_CHARS_MIN

# Secret Key: JWT 서명, 세션 암호화 등에 사용
# 생성 방법: python -c "import secrets; print(secrets.token_urlsafe(64))"
SECRET_KEY=CHANGE_THIS_TO_RANDOM_SECRET_KEY_64_CHARS_MIN

# CORS 허용 도메인 (쉼표로 구분)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8000

# Trusted Hosts (쉼표로 구분)
TRUSTED_HOSTS=localhost,127.0.0.1

# =================================================================
# Application Settings
# =================================================================
APP_NAME=College Notice Crawler
DEBUG=false
ENV=production
LOG_LEVEL=INFO

# =================================================================
# Crawler Settings
# =================================================================
DEFAULT_RATE_LIMIT_PER_HOST=1.0
MAX_CONCURRENT_REQUESTS_PER_HOST=2
BROWSER_TIMEOUT_SECONDS=30
MAX_RETRIES=3
RETRY_DELAY_SECONDS=5
RESPECT_ROBOTS_TXT=true
REQUEST_TIMEOUT=30
MAX_CONTENT_LENGTH=10485760  # 10MB

# User Agent
USER_AGENT=Mozilla/5.0 (compatible; CollegeNotiBot/1.0; +https://your-domain.com/bot)

# =================================================================
# Playwright Settings
# =================================================================
PLAYWRIGHT_BROWSER_TYPE=chromium
PLAYWRIGHT_HEADLESS=true
PLAYWRIGHT_VIEWPORT_WIDTH=1920
PLAYWRIGHT_VIEWPORT_HEIGHT=1080
PLAYWRIGHT_TIMEOUT=30000
PLAYWRIGHT_WAIT_UNTIL=networkidle

# =================================================================
# Monitoring & Logging
# =================================================================
# Sentry DSN (에러 추적 및 Slack 알림)
# 1. https://sentry.io 에서 프로젝트 생성
# 2. DSN 복사하여 아래에 입력
# 3. Sentry 대시보드에서 Slack Integration 설정
# 형식: https://<key>@<organization>.ingest.sentry.io/<project>
# 예시: https://abc123@o123456.ingest.sentry.io/7654321
SENTRY_DSN=

# Sentry 환경 설정
# development: 모든 트랜잭션 추적 (100%)
# staging: 일부 트랜잭션 추적 (10%)
# production: 일부 트랜잭션 추적 (10%)
ENV=production

# 애플리케이션 이름 (Sentry 릴리스 태그에 사용)
APP_NAME=인천대학교 크롤링 서버

# 성능 모니터링 샘플링 비율 (0.0 ~ 1.0)
# 0.1 = 10%의 트랜잭션만 추적 (권장)
# 1.0 = 모든 트랜잭션 추적 (개발 환경에서만 사용)
SENTRY_TRACES_SAMPLE_RATE=0.1

# 프로파일링 샘플링 비율 (0.0 ~ 1.0)
SENTRY_PROFILES_SAMPLE_RATE=0.1

# Prometheus
ENABLE_PROMETHEUS=true
METRICS_PORT=8000

# Grafana Admin Credentials
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=CHANGE_THIS_STRONG_PASSWORD

# Health Check
HEALTH_CHECK_INTERVAL=30

# Logging
LOG_FORMAT=json  # json or text
LOG_FILE_PATH=logs/app.log
LOG_ROTATION=daily
LOG_RETENTION_DAYS=30

# =================================================================
# Notifications
# =================================================================
# Slack Webhook URL (알림 받으려면 설정)
SLACK_WEBHOOK_URL=

# Slack 알림 활성화
ENABLE_SLACK_NOTIFICATIONS=false
NOTIFICATION_LEVEL=ERROR
WEBHOOK_TIMEOUT=10

# =================================================================
# Security Settings
# =================================================================
# Rate Limiting
ENABLE_RATE_LIMITING=true
MAX_REQUESTS_PER_MINUTE=60

# IP Blocking
BLOCK_SUSPICIOUS_IPS=true

# Proxy Rotation (필요시)
ENABLE_PROXY_ROTATION=false
# PROXY_LIST=http://proxy1:8080,http://proxy2:8080

# =================================================================
# Development Only Settings (프로덕션에서는 제거!)
# =================================================================
# 개발 환경에서만 사용하는 설정들
# ENABLE_DEBUG_TOOLBAR=true
# DISABLE_AUTH_CHECK=false
